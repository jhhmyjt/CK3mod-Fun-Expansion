namespace = hc
#desc event
hc.101 = {
	type = character_event
	desc = hc.101.desc
	title = hc.101.t
	# left_portrait = {
	# 	character = ROOT
	# 	animation = stress
	# }
	theme = crown
	trigger = {
		is_ai = no
	}
	option = {
		name = hc.101.a
		flavor = "#F test#"
	}
	option = {
		name = hc.101.b
		hidden_effect = {
			trigger_event = {
				on_action = on_action_hc_every_year
				years = 1
			}
		}
	}
}

#test event
hc.100 = {
	type = character_event
	desc = hc.100.desc
	title = hc.100.t
	left_portrait = {
		character = ROOT
		animation = stress
	}
	theme = crown
	override_background = {
		reference = corridor_night
	}
	trigger = {
		is_ai = no
	}
	option = {
		name = hc.100.a
		hidden_effect = {
			remove_decision_cooldown = hc_cruise_decision
		}
	}
}

#接受神考
hc.001 = {
	type = character_event
	desc = hc.001.desc
	title = hc.001.t
	left_portrait = {
		character = ROOT
		animation = stress
	}
	theme = crown
	override_background = {
		reference = corridor_night
	}
	trigger = {
		# NOT = {
		# 	has_character_modifier = hc_modifier_01
		# }
		# NOT = {
		# 	has_trait = god_descent
		# }
		is_ai = no
	}
	option = {
		name = hc.001.a
		add_character_modifier = {
			modifier = hc_01_modifier
			days = 365
		}
		add_gold = 1000
		root.dynasty = {
			add_dynasty_prestige = -100
		}
		trigger_event = {
			id = hc.002
			years = 1
		}
	}
	option = {
		name = hc.001.b
		add_character_modifier = {
			modifier = hc_01_modifier
			days = 365
		}
		trigger_event = {
			id = hc.002
			days = 365
		}
	}
	option = {
		name = hc.001.c
		hidden_effect = {
			remove_decision_cooldown = hc_begin_decision
		}
	}
	option = {
		name = hc.001.d
		add_prowess_skill = 3
		hidden_effect = {
			add_character_modifier = {
				modifier = hc_char_modifier_03
				years = 5
			}
		}
	}
}

#神考结束
hc.002 = {
	type = character_event
	title = hc.002.t
	desc = hc.002.desc
	left_portrait = {
		character = ROOT
		animation = war_over_win
	}
	theme = crown
	override_background = {
		reference = garden
	}
	trigger = {
		is_ai = no
	}
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		add_trait = god_descent
		if = {
			limit = {
				has_ep1_dlc_trigger = yes
			}
			hc_create_artifact_saint_sword_effect = {
				OWNER = root
			}
			add_to_global_variable_list = {
				name = hc_unavailable_unique_art
				target = flag:hc_artifact_saint_sword
			}
		}
		root.house = {
			add_house_modifier = {
				modifier = hc_dynasty_god_modifier
			}
		}
	}
	option = {
		name = hc.002.a
		remove_character_modifier = hc_01_modifier
		if = {
			limit = {
				is_male = yes
			}
			give_nickname = nick_the_god
		}
		if = {
			limit = {
				is_female = yes
			}
			give_nickname = nick_the_godness
		}
		# every_player_heir = {
		# 	add_character_flag = flag_hc_god_child
		# }
		# give_nickname = nick_the_god
	}
	option = {
		name = hc.002.b
		remove_character_modifier = hc_01_modifier
	}
	after = {
		trigger_event = {
			on_action = on_action_hc
		}
		trigger_event = {
			on_action = on_action_hc_special_building
			years = 1
		}
		trigger_event = {
			on_action = on_action_hc_every_year
			years = 1
		}
	}
}

#战争时指挥军队
hc.003 = {
	type = character_event
	desc = hc.003.desc
	title = hc.003.t
	hidden = yes
	left_portrait = {
		character = ROOT
		animation = personality_honorable
	}
	theme = battle
	override_background = {
		reference = army_camp
	}
	trigger = {
		is_ai = no
		is_in_army = yes
		is_at_war = yes
		NOT = {
			has_character_modifier = hc_char_modifier_02
		}
	}
	option = {
		name = hc.003.a
		add_character_modifier = hc_char_modifier_02
	}
}

#战争结束
hc.004 = {
	type = character_event
	desc = hc.004.desc
	title = hc.004.t
	hidden = yes
	left_portrait = {
		character = ROOT
		animation = personality_honorable
	}
	theme = battle
	override_background = {
		reference = army_camp
	}
	trigger = {
		has_character_modifier = hc_char_modifier_02
		OR = {
			is_in_army = no
			is_at_war = no
		}
		# is_ai = no
	}
	option = {
		name = hc.004.a
		remove_character_modifier = hc_char_modifier_02
		if = {
			limit = {
				Not = {
					has_character_modifier = hc_02_modifier
				}
			}
			add_character_modifier = {
				modifier = hc_02_modifier
				months = 3
			}
		}
	}
}

#命运选择-传统
hc.008 = {
	type = character_event
	title = hc.008.t
	desc = hc.008.desc
	left_portrait = {
		character = ROOT
		animation = personality_honorable
	}
	artifact = {
		target = scope:hc_artifacts_sword
		position = lower_left_portrait
		trigger = {
			exists = scope:hc_artifacts_sword
		}
	}
	theme = crown
	override_background = {
		reference = council_chamber
	}
	trigger = {
		is_ai = no
	}
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		add_character_flag = flag_hc_has_saint_sword
		random_artifact = {
			limit = {
				has_variable = hc_saint_sword
			}
			save_scope_as = hc_artifacts_sword
		}
	}
	# option = {
	# 	#不传特质
	# 	trigger = {
	# 		NOT = {
	# 			has_trait = pioneer
	# 		}
	# 	}
	# 	name = hc.008.a
	# 	add_trait = pioneer
	# 	root.house = {
	# 		add_house_modifier = {
	# 			modifier = hc_dynasty_pioneer_modifier
	# 		}
	# 	}
	# 	give_nickname = nick_the_pioneer
	# 	add_character_modifier = {
	# 		modifier = hc_04_modifier
	# 		months = 3
	# 	}
	# }
	# option = {
	# 	#不传特质
	# 	trigger = {
	# 		NOT = {
	# 			has_trait = pioneer
	# 		}
	# 	}
	# 	add_prestige = 200
	# 	name = hc.008.c
	# 	add_trait = pioneer
	# 	root.house = {
	# 		add_house_modifier = {
	# 			modifier = hc_dynasty_pioneer_modifier
	# 		}
	# 	}
	# 	add_character_modifier = {
	# 		modifier = hc_04_modifier
	# 		months = 3
	# 	}
	# }
	# option = {
	# 	#传特质,弱化
	# 	name = hc.008.b
	# 	add_trait = weak_god_descent
	# 	add_character_modifier = {
	# 		modifier = hc_04_modifier
	# 		months = 3
	# 	}
	# 	add_character_modifier = {
	# 		modifier = hc_12_modifier
	# 		years = 5
	# 	}
	# }
	option = {
		name = hc.008.a
		add_trait = god_descent
		add_character_modifier = {
			modifier = hc_04_modifier
			months = 3
		}
		add_character_modifier = {
			modifier = hc_12_modifier
			years = 5
		}
		give_nickname = nick_hc_the_succession
	}
	option = {
		name = hc.008.b
		add_trait = god_descent
		add_character_modifier = {
			modifier = hc_04_modifier
			months = 3
		}
		add_character_modifier = {
			modifier = hc_12_modifier
			years = 5
		}
		add_stress = -30
	}
	after = {
		trigger_event = {
			on_action = on_action_hc
		}
		trigger_event = {
			years = 5
			on_action = on_action_certified
		}
	}
}

#命运选择-创新
hc.0081 = {
	type = character_event
	title = hc.0081.t
	desc = hc.0081.desc
	left_portrait = {
		character = ROOT
		animation = personality_bold
	}
	theme = crown
	override_background = {
		reference = council_chamber
	}
	trigger = {
		is_ai = no
	}
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		add_character_flag = flag_hc_has_saint_sword
	}
	option = {
		name = hc.0081.a
		custom_tooltip = hc.0081_effect_tt
		add_trait = pioneer
		add_character_modifier = {
			modifier = hc_04_modifier
			months = 3
		}
		hidden_effect = {
			every_sub_realm_county = {
				add_county_modifier = {
					modifier = hc_country_modifier_01
					years = 3
				}
			}
		}
		trigger_event = {
			on_action = on_action_hc
		}
		trigger_event = {
			years = 5
			on_action = on_action_certified
		}
	}
	option = {
		name = hc.0081.b
		add_trait = pioneer
		add_character_modifier = {
			modifier = hc_04_modifier
			months = 3
		}
		root.dynasty = {
			add_dynasty_prestige = 1000
		}
		trigger_event = {
			on_action = on_action_hc
		}
		trigger_event = {
			years = 5
			on_action = on_action_certified
		}
	}
}

#去世
hc.009 = {
	type = character_event
	title = hc.009.t
	desc = hc.009.desc
	left_portrait = {
		character = ROOT
		animation = personality_zealous
	}
	right_portrait = {
		character = ROOT.player_heir
		animation = grief
	}
	theme = death
	override_background = {
		reference = throne_room
	}
	trigger = {
		is_ai = no
	}
	option = {
		#家和而去
		name = hc.009.a
		every_player_heir = {
			add_character_modifier = {
				modifier = hc_03_modifier
				years = 5
			}
			show_as_tooltip = {
				add_piety_level = 1
				add_prestige_level = 1
			}
		}
		root.dynasty = {
			add_dynasty_prestige = 500
		}
		death = {
			death_reason = death_suicide
		}
	}
	option = {
		#退隐
		name = hc.009.b
		if = {
			limit = {
				has_trait = pioneer
			}
			remove_trait = pioneer
		}
		if = {
			limit = {
				has_trait = god_descent
			}
			remove_trait = god_descent
		}
		if = {
			limit = {
				has_trait = weak_god_descent
			}
			remove_trait = weak_god_descent
		}
		if = {
			limit = {
				has_nickname = nick_the_pioneer
			}
			remove_nickname = nick_the_pioneer
		}
		if = {
			limit = {
				has_nickname = nick_the_god
			}
			remove_nickname = nick_the_god
		}
		give_nickname = nick_hc_the_hermit
		add_trait = hc_recluse
		every_player_heir = {
			add_character_modifier = {
				modifier = hc_03_modifier
				years = 3
			}
			show_as_tooltip = {
				add_piety = 150
				add_prestige = 200
			}
		}
		depose = yes
		# banish = yes
	}
	option = {
		name = hc.009.c
		hidden_effect = {
			remove_decision_cooldown = hc_end_decision
		}
	}
}

#考验事件
hc.010 = {
	type = character_event
	title = hc.010.t
	desc = hc.010.desc
	left_portrait = {
		character = ROOT
		triggered_animation = {
			trigger = {
				prestige_level > 2
				piety_level > 2
			}
			animation = happiness
		}
		triggered_animation = {
			trigger = {
				NOT = {
					prestige_level > 2
					piety_level > 2
				}
			}
			animation = sadness
		}
	}
	theme = crown
	override_background = {
		reference = bedchamber
	}
	trigger = {
		is_ai = no
	}
	option = {
		name = {
			#good job
			trigger = {
				prestige_level > 2
				piety_level > 2
			}
			text = hc.010.c
		}
		name = {
			#bad
			trigger = {
				NOT = {
					prestige_level > 2
					piety_level > 2
				}
			}
			text = hc.010.d
		}
		if = {
			limit = {
				prestige_level > 2
				piety_level > 2
			}
			root.dynasty = {
				add_dynasty_prestige = 1000
			}
			add_character_modifier = {
				modifier = hc_05_modifier
				days = 90
			}
		}
		if = {
			limit = {
				NOT = {
					prestige_level > 2
					piety_level > 2
				}
			}
			root.dynasty = {
				add_dynasty_prestige = -500
			}
			add_stress = 30
		}
	}
	option = {
		name = {
			#good job
			trigger = {
				prestige_level > 2
				piety_level > 2
			}
			text = hc.010.a
		}
		name = {
			#bad
			trigger = {
				NOT = {
					prestige_level > 2
					piety_level > 2
				}
			}
			text = hc.010.b
		}
		if = {
			limit = {
				NOT = {
					prestige_level > 2
					piety_level > 2
				}
			}
			root.dynasty = {
				add_dynasty_prestige = -500
			}
			add_prestige = -350
			custom_tooltip = hc.010_effect_tt2
			random_list = {
				20 = {
					trigger = {
						learning < 10
					}
					give_nickname = nick_hc_the_big_clever
				}
			}
		}
		if = {
			limit = {
				prestige_level > 2
				piety_level > 2
			}
			root.dynasty = {
				add_dynasty_prestige = 1000
			}
			add_character_modifier = {
				modifier = hc_05_modifier
				days = 90
			}
			custom_tooltip = hc.010_effect_tt
			hidden_effect = {
				random_list = {
					25 = {
						trigger = {
							learning>24
						}
						modifier = {
							add = learning
						}
						give_nickname = nick_hc_the_wolong
						add_learning_lifestyle_xp = 25
					}
					25 = {
						trigger = {
							diplomacy>24
						}
						modifier = {
							add = diplomacy
						}
						give_nickname = nick_hc_the_strategist
						add_diplomacy_lifestyle_xp = 25
					}
					25 = {
						trigger = {
							martial>24
						}
						modifier = {
							add = martial
						}
						give_nickname = nick_hc_the_fulong
						add_martial_lifestyle_xp = 25
					}
					25 = {
						trigger = {
							stewardship>24
						}
						modifier = {
							add = stewardship
						}
						give_nickname = nick_hc_the_leader
						add_stewardship_lifestyle_xp = 25
					}
					25 = {
						trigger = {
							intrigue>24
						}
						modifier = {
							add = intrigue
						}
						give_nickname = nick_hc_the_operator
						add_intrigue_lifestyle_xp = 25
					}
					25 = {
						trigger = {
							prowess>24
						}
						modifier = {
							add = prowess
						}
						give_nickname = nick_hc_the_thousands_enemies
						add_dread = 30
					}
				}
			}
		}
	}
}

#恢复罗马事件
hc.011 = {
	type = character_event
	title = hc.011.t
	desc = hc.011.desc
	theme = culture_change
	left_portrait = {
		character = root
		animation = personality_bold
	}
	immediate = {
		save_scope_as = embracer
		culture = {
			save_scope_as = embracer_former_culture
		}
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	trigger = {
		is_ai = no
	}
	option = {
		name = hc.011.a
		embrace_roma_effect = yes
	}
}

#意外死亡
hc.012 = {
	type = character_event
	title = hc.012.t
	desc = hc.012.desc
	theme = death
	left_portrait = {
		character = root
		animation = personality_bold
	}
	trigger = {
		is_ai = no
		any_player = {
			OR = {
				has_trait = god_descent
				has_trait = weak_god_descent
				has_trait = pioneer
			}
			this.player_heir = root
		}
	}
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	option = {
		name = hc.012.a
	}
}

#隐藏添加特质事件
hc.013 = {
	type = character_event
	hidden = yes
	trigger = {
		any_child = {
			age = 0
			is_child_of = root
		}
	}
	immediate = {
		if = {
			limit = {
				has_trait = god_descent
			}
			every_child = {
				limit = {
					age = 0
					is_child_of = root
				}
				random_list = {
					50 = {
						trigger = {
							is_female = yes
							diplomacy > 5
						}
						modifier = {
							add = 30
						}
						add_trait = weak_god_descent
						#冰雪聪明
						add_character_modifier = {
							modifier = hc_13_modifier
							years = 6
						}
					}
					50 = {
						trigger = {
							is_male = yes
							prowess > 5
						}
						modifier = {
							add = 30
						}
						add_trait = weak_god_descent
						#生龙活虎
						add_character_modifier = {
							modifier = hc_14_modifier
							years = 6
						}
					}
					75 = {
						add_trait = weak_god_descent
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = weak_god_descent
			}
			every_child = {
				limit = {
					age = 0
					is_child_of = root
				}
				random_list = {
					50 = {
						trigger = {
							is_female = yes
							diplomacy > 7
						}
						modifier = {
							add = 20
						}
						add_trait = weak_god_descent
						#冰雪聪明
						add_character_modifier = {
							modifier = hc_13_modifier
							years = 5
						}
					}
					50 = {
						trigger = {
							is_male = yes
							prowess > 6
						}
						modifier = {
							add = 20
						}
						add_trait = weak_god_descent
						#生龙活虎
						add_character_modifier = {
							modifier = hc_14_modifier
							years = 5
						}
					}
					50 = {
						add_trait = weak_god_descent
					}
				}
			}
		}
	}
}
