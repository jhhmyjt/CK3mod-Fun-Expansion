# hc_test_decision = {
# 	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
# 	title = "hc mod test decision"
# 	selection_tooltip = "test"
# 	desc = "test decision"
# 	confirm_text = "test"
# 	ai_check_interval = 0
# 	major = yes
# 	is_shown = {
# 		is_ai = no
# 	}
# 	is_valid = {
# 		# title:b_constantinople.title_province = {
# 		# 	has_special_building_slot = yes
# 		# }
# 	}
# 	effect = {
# 		root.culture = {
# 			remove_variable = tradition_cooldown
# 		}
# 	}
# 	ai_potential = {
# 		always = no
# 	}
# 	ai_will_do = {
# 		base = 0
# 	}
# }
#reset
hc_reset_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	title = hc_reset_decision_t
	selection_tooltip = hc_reset_decision_tt
	desc = hc_reset_decision_desc
	confirm_text = hc_reset_decision_confirm
	ai_check_interval = 0
	major = no
	is_shown = {
		always = no
		is_ai = no
		debug_only = yes
	}
	is_valid = {
	}
	effect = {
		custom_tooltip = hc_reset_decision_effect_tt
		# trigger_event = hc.101
		trigger_event = {
			on_action = on_action_hc_every_year
			years = 1
		}
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#开始
hc_begin_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	title = hc_begin_decision_t
	selection_tooltip = hc_begin_decision_tooltip
	desc = hc_begin_decision_desc
	confirm_text = hc_begin_decision_confirm
	ai_check_interval = 0
	major = yes
	cooldown = {
		days = 3650
	}
	is_shown = {
		is_ai = no
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:hc_begin_decision
			}
		}
		NOT = {
			root.house = {
				has_house_modifier = hc_dynasty_god_modifier
			}
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_begin_decision_effect_tt_01
		custom_tooltip = hc_begin_decision_effect_tt_02
		custom_tooltip = hc_begin_decision_effect_tt_03
		custom_tooltip = hc_begin_decision_effect_tt_05
		custom_description = {
			text = hc_begin_decision_effect_tt_04
			has_ep1_dlc_trigger = yes
		}
		trigger_event = {
			id = hc.001
			days = 5
		}
	}
	# ai_check_frequency = 0
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#结束故事
hc_end_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"
	title = hc_end_decision_t
	selection_tooltip = hc_end_decision_tooltip
	desc = hc_end_decision_desc
	confirm_text = hc_end_decision_confirm
	major = no
	ai_check_interval = 0
	cooldown = {
		days = 5
	}
	is_shown = {
		is_ai = no
		root.house = {
			has_house_modifier = hc_dynasty_god_modifier
		}
		exists = player_heir
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_end_decision_effect_tt
		trigger_event = {
			id = hc.009
		}
	}
	# ai_check_frequency = 0
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#打造宝物
hc_build_artifacts_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	title = hc_build_artifacts_decision_t
	selection_tooltip = hc_build_artifacts_decision_tooltip
	desc = hc_build_artifacts_decision_desc
	confirm_text = hc_build_artifacts_decision_confirm
	ai_check_interval = 0
	major = yes
	cooldown = {
		days = 3650
	}
	cost = {
		gold = 450
		prestige = 300
	}
	is_shown = {
		always = no
		is_ai = no
		has_ep1_dlc_trigger = yes
		is_landed = yes
		highest_held_title_tier >= tier_county
		exists = capital_province
		root.house = {
			has_house_modifier = hc_dynasty_god_modifier
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_build_artifacts_decision_effect_tt_01
		if = {
			limit = {
				any_artifact = {
					has_variable = hc_saint_sword
				}
			}
			hidden_effect = {
				random_artifact = {
					limit = {
						has_variable = hc_saint_sword
					}
					save_scope_as = hc_build_artifacts_decision_art
				}
				scope:hc_build_artifacts_decision_art = {
					add_durability = -999
				}
				hc_create_artifact_saint_sword_effect = {
					OWNER = root
				}
			}
		}
		else_if = {
			limit = {
				Not = {
					is_target_in_global_variable_list = {
						name = hc_unavailable_unique_art
						target = flag:hc_artifact_saint_sword
					}
				}
			}
			hidden_effect = {
				hc_create_artifact_saint_sword_effect = {
					OWNER = root
				}
				add_to_global_variable_list = {
					name = hc_unavailable_unique_art
					target = flag:hc_artifact_saint_sword
				}
			}
		}
	}
	# ai_check_frequency = 0
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#新的开始
hc_new_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"
	title = hc_new_decision_t
	selection_tooltip = hc_new_decision_tooltip
	desc = hc_new_decision_desc
	confirm_text = hc_new_decision_confirm
	major = yes
	ai_check_interval = 0
	is_shown = {
		is_ai = no
		root.house = {
			has_house_modifier = hc_dynasty_god_modifier
		}
		NOT = {
			has_trait = god_descent
		}
		NOT = {
			has_character_flag = flag_hc_has_saint_sword
		}
	}
	cooldown = {
		days = 3650
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_new_decision_effect_tt
		# if = {
		# 	limit = {
		# 		root.house = {
		# 			has_house_modifier = hc_dynasty_pioneer_modifier
		# 		}
		# 	}
		# 	trigger_event = {
		# 		id = hc.0081
		# 		days = 2
		# 	}
		# }
		# else = {
		# 	trigger_event = {
		# 		id = hc.008
		# 		days = 2
		# 	}
		# }
		trigger_event = {
			id = hc.008
			days = 2
		}
	}
	# ai_check_frequency = 0
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#巡游事件
hc_cruise_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"
	title = hc_cruise_decision_t
	selection_tooltip = hc_cruise_decision_tooltip
	desc = hc_cruise_decision_desc
	confirm_text = hc_cruise_decision_confirm
	ai_check_interval = 0
	cost = {
		gold = {
			add = standard_activity_cost
			divide = 1.5
			if = {
				limit = {
					has_trait = god_descent
				}
				multiply = 0
			}
			if = {
				limit = {
					has_trait = weak_god_descent
				}
				multiply = 0.5
			}
			if = {
				limit = {
					has_trait = pioneer
				}
				multiply = 0.5
			}
		}
	}
	cooldown = {
		years = 3
	}
	is_shown = {
		is_landed = yes
		highest_held_title_tier > tier_county
	}
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}
	effect = {
		custom_tooltip = hc_cruise_decision_effect_tt.e
		custom_tooltip = hc_cruise_decision_effect_tt.a
		custom_tooltip = hc_cruise_decision_effect_tt.b
		custom_tooltip = hc_cruise_decision_effect_tt.c
		custom_tooltip = hc_cruise_decision_effect_tt.d
		#Stress loss
		stress_impact = {
			base = -20
			lazy = 60
			compassionate = -10
			craven = 50
			diligent = -10
			athletic = -10
			sadistic = 30
			brave = -20
			god_descent = -50
			weak_god_descent = -30
			pioneer = -40
		}
		hidden_effect = {
			random_sub_realm_barony = {
				title_province = {
					spawn_activity = {
						type = activity_cruise
						owner = root
					}
				}
			}
		}
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#恢复罗马正统
embrace_roma_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes
	ai_check_interval = 0
	title = embrace_roma_decision_t
	selection_tooltip = embrace_roma_decision_tooltip
	desc = embrace_roma_decision_desc
	confirm_text = embrace_roma_decision_confirm
	cost = {
		piety = 500
		gold = 500
	}
	is_shown = {
		is_landed = yes
		root.primary_title = title:e_roman_empire
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:embrace_roma_decision
			}
		}
	}
	is_valid = {
		has_title = title:e_roman_empire
		piety_level > 3
		prestige_level > 3
		root.dynasty = {
			dynasty_prestige_level > 3
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_independent_ruler = yes
		is_at_war = no
	}
	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:embrace_roma_decision
		}
		show_as_tooltip = {
			embrace_roma_effect = yes
		}
		trigger_event = hc.011
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#册封女帝
hc_coronation_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"
	title = hc_coronation_decision_t
	selection_tooltip = hc_coronation_decision_tooltip
	desc = hc_coronation_decision_desc
	confirm_text = hc_coronation_decision_confirm
	major = yes
	ai_check_interval = 0
	is_shown = {
		is_ai = no
		root.primary_title = title:e_roman_empire
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:coronation_decision
			}
		}
		ROOT.primary_spouse = {
			is_female = yes
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_independent_ruler = yes
		is_at_war = no
	}
	cost = {
		gold = 500
		piety = 750
		prestige = 750
	}
	effect = {
		trigger_event = {
			id = coronation.001
			days = 2
		}
		root.dynasty = {
			add_dynasty_prestige = 1000
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:coronation_decision
		}
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#重铸庇护
hc_rebuild_god_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	title = hc_rebuild_god_decision_t
	selection_tooltip = hc_rebuild_god_decision_tooltip
	desc = hc_rebuild_god_decision_desc
	confirm_text = hc_rebuild_god_decision_confirm
	ai_check_interval = 0
	major = yes
	cooldown = {
		days = 3650
	}
	is_shown = {
		is_ai = no
		root.house = {
			has_house_modifier = hc_dynasty_god_modifier
		}
		NOT = {
			has_trait = weak_god_descent
		}
		NOT = {
			has_trait = god_descent
		}
		has_trait = pioneer
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_rebuild_god_decision_effect_tt
		trigger_event = {
			id = hc_rebuild_god.100
			days = 2
		}
	}
	# ai_check_frequency = 0
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#添加神圣祭坛
hc_establish_building_altar_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes
	ai_check_interval = 0
	title = hc_establish_building_altar_decision_t
	selection_tooltip = hc_establish_building_altar_decision_tooltip
	confirm_text = hc_establish_building_altar_decision_confirm
	desc = hc_establish_building_altar_decision_desc
	is_shown = {
		is_landed = yes
		OR = {
			has_trait = weak_god_descent
			has_trait = god_descent
		}
		exists = capital_province
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:hc_establish_building_altar_decision
			}
		}
	}
	is_valid = {
		custom_description = {
			text = is_god_dynasty
			root.house = {
				has_house_modifier = hc_dynasty_god_modifier
			}
		}
		custom_description = {
			text = hc_has_special_building
			capital_province = {
				NOT = {
					has_special_building = yes
				}
			}
		}
		OR = {
			root.dynasty = {
				dynasty_prestige_level >= 8
			}
			prestige_level >= 5
			piety_level >= 5
		}
	}
	is_valid_showing_failures_only = {
		is_at_war = no
		is_capable_adult = yes
		is_imprisoned = no
	}
	cost = {
		gold = 650
		prestige = 900
	}
	effect = {
		# set_global_variable = {
		# 	name = hc_altar
		# 	value = yes
		# }
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:hc_establish_building_altar_decision
		}
		root.house = {
			add_house_modifier = hc_dynasty_alert_modifier
		}
		custom_tooltip = hc_establish_building_altar_decision_custom_tt_01
		capital_province = {
			add_special_building_slot = hc_scared_altar
			add_special_building = hc_scared_altar
		}
	}
	ai_will_do = {
		base = 0
	}
}

#举行祭祀仪式
hc_sacrificial_ceremony_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	ai_check_interval = 0
	cooldown = {
		years = 1
	}
	title = hc_sacrificial_ceremony_decision_t
	selection_tooltip = hc_sacrificial_ceremony_decision_tooltip
	desc = hc_sacrificial_ceremony_decision_desc
	confirm_text = hc_sacrificial_ceremony_decision_confirm
	cost = {
		gold = 50
	}
	is_shown = {
		is_landed = yes
		root.house = {
			has_house_modifier = hc_dynasty_alert_modifier
		}
	}
	is_valid = {
		OR = {
			root.dynasty = {
				dynasty_prestige >= 100000
			}
			prestige >= 100000
			piety >= 100000
			gold >= 100000
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_sacrificial_ceremony_decision_effect_01
		custom_tooltip = hc_sacrificial_ceremony_decision_effect_02
		custom_tooltip = hc_sacrificial_ceremony_decision_effect_03
		custom_tooltip = hc_sacrificial_ceremony_decision_effect_04
		trigger_event = hc_sacrifice.001
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#建造特殊建筑
hc_establish_building_special_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes
	ai_check_interval = 0
	title = hc_establish_building_special_decision_t
	selection_tooltip = hc_establish_building_special_decision_tooltip
	confirm_text = hc_establish_building_special_decision_confirm
	desc = hc_establish_building_special_decision_desc
	# cooldown = {
	# 	months = 3
	# }
	is_shown = {
		is_landed = yes
		OR = {
			has_trait = weak_god_descent
			has_trait = god_descent
		}
		hc_special_building_trigger = yes
	}
	is_valid = {
		OR = {
			has_title = title:b_roma
			has_title = title:b_hradec
			has_title = title:b_aquileia
			has_title = title:b_bordeaux
			has_title = title:b_eichtstad
			has_title = title:b_roma
			has_title = title:b_lubeck
			has_title = title:b_cordoba
		}
		OR = {
			prestige_level >= 3
			piety_level >= 3
		}
		custom_description = {
			text = hc_establish_building_special_decision_custom_tt_03
			NOT = {
				has_character_flag = hc_flag_build_cooldown
			}
		}
	}
	is_valid_showing_failures_only = {
		is_at_war = no
		is_capable_adult = yes
		is_imprisoned = no
	}
	effect = {
		custom_tooltip = hc_establish_building_special_decision_custom_tt_01
		custom_tooltip = hc_establish_building_special_decision_custom_tt_02
		hc_special_build_effect = yes
		# hc_special_build_effect = yes
		trigger_event = hc_special_build.001
	}
	ai_will_do = {
		base = 0
	}
}

#摇人
hc_call_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_invite_knights.dds"
	major = no
	ai_check_interval = 0
	title = hc_call_decision_t
	selection_tooltip = hc_call_decision_tooltip
	confirm_text = hc_call_decision_confirm
	desc = hc_call_decision_desc
	cooldown = {
		months = 1
	}
	cost = {
		prestige = {
			add = 300
			divide = 2
			if = {
				limit = {
					has_trait = god_descent
				}
				multiply = 0.3
			}
			if = {
				limit = {
					has_trait = weak_god_descent
				}
				multiply = 0.5
			}
			if = {
				limit = {
					has_trait = pioneer
				}
				multiply = 0.5
			}
		}
	}
	is_shown = {
		is_landed = yes
		root.house = {
			has_house_modifier = hc_dynasty_god_modifier
		}
	}
	is_valid = {
		prestige_level >= 3
		is_at_war = yes
		custom_description = {
			text = hc_call_decision_custom_tt_01
			any_vassal = {
				AND = {
					has_trait = hc_knight
					is_at_war = no
				}
			}
		}
	}
	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
	}
	effect = {
		custom_tooltip = hc_call_decision_custom_tt_02
		trigger_event = {
			id = hc_call_war.001
			days = 3
		}
	}
	ai_will_do = {
		base = 0
	}
}

#采用先进继承法
hc_adopt_advanced_succession_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"
	title = hc_adopt_advanced_succession_decision_t
	desc = hc_adopt_advanced_succession_decision_desc
	selection_tooltip = hc_adopt_advanced_succession_decision_tooltip
	confirm_text = hc_adopt_advanced_succession_decision_confirm
	major = yes
	ai_check_interval = 0
	cost = {
		prestige = 2500
		piety = 1000
	}
	is_shown = {
		is_ai = no
		is_ruler = yes
		is_landed = yes
		Not = {
			has_realm_law_flag = advanced_succession_law
		}
		NOT = {
			#Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_hc_adopt_advanced_succession_decision
			}
		}
		is_independent_ruler = yes
	}
	is_valid = {
		prestige_level >= high_prestige_level
		highest_held_title_tier = tier_empire
		custom_description = {
			text = is_god_dynasty
			root.house = {
				has_house_modifier = hc_dynasty_god_modifier
			}
		}
	}
	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}
	effect = {
		# custom_tooltip = reform_carolingian_empire_decision_effect_tooltip
		if = {
			limit = {
				NOT = {
					has_realm_law = single_heir_succession_law
				}
			}
			add_realm_law_skip_effects = single_heir_succession_law
		}
		# every_vassal = {
		# 	add_opinion = {
		# 		modifier = hc_implemented_advanced_succession_law_opinion
		# 		years = 30
		# 		target = root
		# 	}
		# }
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_hc_adopt_advanced_succession_decision
			}
		}
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}

#加快文化发展
hc_improve_culture_development_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_misc.dds"
	title = hc_improve_culture_development_decision_t
	desc = hc_improve_culture_development_decision_desc
	selection_tooltip = hc_improve_culture_development_decision_tooltip
	confirm_text = hc_improve_culture_development_decision_confirm
	major = yes
	ai_check_interval = 0
	cooldown = {
		years = 1
	}
	cost = {
		prestige = 500
	}
	is_shown = {
		is_ai = no
		is_landed = yes
		root.culture = {
			has_variable = tradition_cooldown
		}
	}
	is_valid = {
		prestige_level >= high_prestige_level
		has_trait = scholar
		custom_description = {
			text = hc_is_culture_leader
			exists = culture.culture_head
			culture.culture_head = root
		}
		custom_description = {
			text = is_god_dynasty
			root.house = {
				has_house_modifier = hc_dynasty_god_modifier
			}
		}
	}
	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}
	effect = {
		custom_tooltip = hc_improve_culture_development_decision_effect_tooltip
		root.culture = {
			remove_variable = tradition_cooldown
		}
	}
	ai_potential = {
		always = no
	}
	ai_will_do = {
		base = 0
	}
}
